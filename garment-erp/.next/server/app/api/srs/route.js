"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/srs/route";
exports.ids = ["app/api/srs/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsrs%2Froute&page=%2Fapi%2Fsrs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsrs%2Froute.js&appDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsrs%2Froute&page=%2Fapi%2Fsrs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsrs%2Froute.js&appDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_garment_erp_src_app_api_srs_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/srs/route.js */ \"(rsc)/./src/app/api/srs/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/srs/route\",\n        pathname: \"/api/srs\",\n        filename: \"route\",\n        bundlePath: \"app/api/srs/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/garment-erp/src/app/api/srs/route.js\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_garment_erp_src_app_api_srs_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/srs/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNycyUyRnJvdXRlLmpzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGZ2FybWVudC1lcnAlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZydW5uZXIlMkZ3b3Jrc3BhY2UlMkZnYXJtZW50LWVycCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDVztBQUN4RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2dhcm1lbnQtZXJwLz9kMTA3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvZ2FybWVudC1lcnAvc3JjL2FwcC9hcGkvc3JzL3JvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zcnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zcnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Nycy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvZ2FybWVudC1lcnAvc3JjL2FwcC9hcGkvc3JzL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsrs%2Froute&page=%2Fapi%2Fsrs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsrs%2Froute.js&appDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/srs/route.js":
/*!**********************************!*\
  !*** ./src/app/api/srs/route.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.js\");\n// src/app/api/srs/route.js\n\n\n\nasync function GET(request) {\n    const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    try {\n        const { searchParams } = new URL(request.url);\n        const status = searchParams.get(\"status\");\n        const customerId = searchParams.get(\"customerId\");\n        const search = searchParams.get(\"search\") || \"\";\n        const where = {};\n        if (status) where.status = status;\n        if (customerId) where.customerId = customerId;\n        if (search) {\n            where.OR = [\n                {\n                    srsNo: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    description: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    styleNo: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    brand: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    colorPrint: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                }\n            ];\n        }\n        const srsList = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sRS.findMany({\n            where,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                customer: {\n                    select: {\n                        name: true,\n                        code: true\n                    }\n                },\n                style: {\n                    select: {\n                        styleNo: true\n                    }\n                },\n                createdBy: {\n                    select: {\n                        name: true\n                    }\n                },\n                costingSheet: {\n                    select: {\n                        id: true,\n                        sellingPrice: true,\n                        totalCostQuoted: true,\n                        actualQuotedPrice: true,\n                        quoteCurrency: true\n                    }\n                }\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            srsList\n        });\n    } catch (error) {\n        console.error(\"SRS GET error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch SRS list\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    try {\n        const body = await request.json();\n        if (!body.customerId || !body.styleNo) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"customerId and styleNo are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Auto-generate SRS number\n        const count = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sRS.count();\n        const year = new Date().getFullYear();\n        const srsNo = `SRS-${year}-${String(count + 1).padStart(4, \"0\")}`;\n        const srs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sRS.create({\n            data: {\n                srsNo,\n                customerId: body.customerId,\n                createdById: user.userId,\n                styleNo: body.styleNo,\n                brand: body.brand || null,\n                colorPrint: body.colorPrint || null,\n                deadline: body.deadline ? new Date(body.deadline) : null,\n                description: body.description,\n                techPackUrl: body.techPackUrl,\n                targetPrice: body.targetPrice,\n                targetPriceCurrency: body.targetPriceCurrency || \"USD\",\n                estimatedQtyMin: body.estimatedQtyMin,\n                estimatedQtyMax: body.estimatedQtyMax,\n                deliveryWindow: body.deliveryWindow,\n                targetMarkets: body.targetMarkets,\n                fabricSpecs: body.fabricSpecs,\n                trimSpecs: body.trimSpecs,\n                notes: body.notes,\n                status: \"RECEIVED\"\n            },\n            include: {\n                customer: {\n                    select: {\n                        name: true,\n                        code: true\n                    }\n                }\n            }\n        });\n        // Auto-create empty costing sheet\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].costingSheet.create({\n            data: {\n                srsId: srs.id\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(srs, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"SRS POST error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create SRS\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJZCxFQUFFO1lBQUM7UUFBRTtRQUUzRCxPQUFPckMscURBQVlBLENBQUNNLElBQUksQ0FBQzZDLEtBQUs7WUFBRTNDLFFBQVE7UUFBSTtJQUM5QyxFQUFFLE9BQU9ELE9BQU87UUFDZG1DLFFBQVFuQyxLQUFLLENBQUMsbUJBQW1CQTtRQUNqQyxPQUFPUCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBdUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDNUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dhcm1lbnQtZXJwLy4vc3JjL2FwcC9hcGkvc3JzL3JvdXRlLmpzPzIzM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9hcGkvc3JzL3JvdXRlLmpzXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gJ0AvbGliL2F1dGgnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG4gIGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3Qgc3RhdHVzID0gc2VhcmNoUGFyYW1zLmdldCgnc3RhdHVzJyk7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2N1c3RvbWVySWQnKTtcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKSB8fCAnJztcblxuICAgIGNvbnN0IHdoZXJlID0ge307XG4gICAgaWYgKHN0YXR1cykgd2hlcmUuc3RhdHVzID0gc3RhdHVzO1xuICAgIGlmIChjdXN0b21lcklkKSB3aGVyZS5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICBpZiAoc2VhcmNoKSB7XG4gICAgICB3aGVyZS5PUiA9IFtcbiAgICAgICAgeyBzcnNObzogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBzdHlsZU5vOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IGJyYW5kOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IGNvbG9yUHJpbnQ6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICBdO1xuICAgIH1cblxuICAgIGNvbnN0IHNyc0xpc3QgPSBhd2FpdCBwcmlzbWEuc1JTLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBjdXN0b21lcjogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgY29kZTogdHJ1ZSB9IH0sXG4gICAgICAgIHN0eWxlOiB7IHNlbGVjdDogeyBzdHlsZU5vOiB0cnVlIH0gfSxcbiAgICAgICAgY3JlYXRlZEJ5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfSxcbiAgICAgICAgY29zdGluZ1NoZWV0OiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgc2VsbGluZ1ByaWNlOiB0cnVlLCB0b3RhbENvc3RRdW90ZWQ6IHRydWUsIGFjdHVhbFF1b3RlZFByaWNlOiB0cnVlLCBxdW90ZUN1cnJlbmN5OiB0cnVlIH0gfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzcnNMaXN0IH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NSUyBHRVQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIFNSUyBsaXN0JyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG4gIGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBpZiAoIWJvZHkuY3VzdG9tZXJJZCB8fCAhYm9keS5zdHlsZU5vKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2N1c3RvbWVySWQgYW5kIHN0eWxlTm8gYXJlIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIEF1dG8tZ2VuZXJhdGUgU1JTIG51bWJlclxuICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgcHJpc21hLnNSUy5jb3VudCgpO1xuICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3Qgc3JzTm8gPSBgU1JTLSR7eWVhcn0tJHtTdHJpbmcoY291bnQgKyAxKS5wYWRTdGFydCg0LCAnMCcpfWA7XG5cbiAgICBjb25zdCBzcnMgPSBhd2FpdCBwcmlzbWEuc1JTLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHNyc05vLFxuICAgICAgICBjdXN0b21lcklkOiBib2R5LmN1c3RvbWVySWQsXG4gICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VyLnVzZXJJZCxcbiAgICAgICAgc3R5bGVObzogYm9keS5zdHlsZU5vLFxuICAgICAgICBicmFuZDogYm9keS5icmFuZCB8fCBudWxsLFxuICAgICAgICBjb2xvclByaW50OiBib2R5LmNvbG9yUHJpbnQgfHwgbnVsbCxcbiAgICAgICAgZGVhZGxpbmU6IGJvZHkuZGVhZGxpbmUgPyBuZXcgRGF0ZShib2R5LmRlYWRsaW5lKSA6IG51bGwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBib2R5LmRlc2NyaXB0aW9uLFxuICAgICAgICB0ZWNoUGFja1VybDogYm9keS50ZWNoUGFja1VybCxcbiAgICAgICAgdGFyZ2V0UHJpY2U6IGJvZHkudGFyZ2V0UHJpY2UsXG4gICAgICAgIHRhcmdldFByaWNlQ3VycmVuY3k6IGJvZHkudGFyZ2V0UHJpY2VDdXJyZW5jeSB8fCAnVVNEJyxcbiAgICAgICAgZXN0aW1hdGVkUXR5TWluOiBib2R5LmVzdGltYXRlZFF0eU1pbixcbiAgICAgICAgZXN0aW1hdGVkUXR5TWF4OiBib2R5LmVzdGltYXRlZFF0eU1heCxcbiAgICAgICAgZGVsaXZlcnlXaW5kb3c6IGJvZHkuZGVsaXZlcnlXaW5kb3csXG4gICAgICAgIHRhcmdldE1hcmtldHM6IGJvZHkudGFyZ2V0TWFya2V0cyxcbiAgICAgICAgZmFicmljU3BlY3M6IGJvZHkuZmFicmljU3BlY3MsXG4gICAgICAgIHRyaW1TcGVjczogYm9keS50cmltU3BlY3MsXG4gICAgICAgIG5vdGVzOiBib2R5Lm5vdGVzLFxuICAgICAgICBzdGF0dXM6ICdSRUNFSVZFRCcsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBjdXN0b21lcjogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgY29kZTogdHJ1ZSB9IH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQXV0by1jcmVhdGUgZW1wdHkgY29zdGluZyBzaGVldFxuICAgIGF3YWl0IHByaXNtYS5jb3N0aW5nU2hlZXQuY3JlYXRlKHsgZGF0YTogeyBzcnNJZDogc3JzLmlkIH0gfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oc3JzLCB7IHN0YXR1czogMjAxIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NSUyBQT1NUIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgU1JTJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0Q3VycmVudFVzZXIiLCJHRVQiLCJyZXF1ZXN0IiwidXNlciIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsImN1c3RvbWVySWQiLCJzZWFyY2giLCJ3aGVyZSIsIk9SIiwic3JzTm8iLCJjb250YWlucyIsIm1vZGUiLCJkZXNjcmlwdGlvbiIsInN0eWxlTm8iLCJicmFuZCIsImNvbG9yUHJpbnQiLCJzcnNMaXN0Iiwic1JTIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwiaW5jbHVkZSIsImN1c3RvbWVyIiwic2VsZWN0IiwibmFtZSIsImNvZGUiLCJzdHlsZSIsImNyZWF0ZWRCeSIsImNvc3RpbmdTaGVldCIsImlkIiwic2VsbGluZ1ByaWNlIiwidG90YWxDb3N0UXVvdGVkIiwiYWN0dWFsUXVvdGVkUHJpY2UiLCJxdW90ZUN1cnJlbmN5IiwiY29uc29sZSIsIlBPU1QiLCJib2R5IiwiY291bnQiLCJ5ZWFyIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJzcnMiLCJjcmVhdGUiLCJkYXRhIiwiY3JlYXRlZEJ5SWQiLCJ1c2VySWQiLCJkZWFkbGluZSIsInRlY2hQYWNrVXJsIiwidGFyZ2V0UHJpY2UiLCJ0YXJnZXRQcmljZUN1cnJlbmN5IiwiZXN0aW1hdGVkUXR5TWluIiwiZXN0aW1hdGVkUXR5TWF4IiwiZGVsaXZlcnlXaW5kb3ciLCJ0YXJnZXRNYXJrZXRzIiwiZmFicmljU3BlY3MiLCJ0cmltU3BlY3MiLCJub3RlcyIsInNyc0lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/srs/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.js":
/*!*************************!*\
  !*** ./src/lib/auth.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n// src/lib/auth.js\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"garment-erp-secret-change-me\";\nconst TOKEN_EXPIRY = \"7d\";\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 10);\n}\nasync function verifyPassword(password, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hash);\n}\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId: user.id,\n        email: user.email,\n        role: user.role,\n        name: user.name\n    }, JWT_SECRET, {\n        expiresIn: TOKEN_EXPIRY\n    });\n}\nfunction verifyToken(token) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n    } catch  {\n        return null;\n    }\n}\nasync function getCurrentUser() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n    const token = cookieStore.get(\"auth-token\")?.value;\n    if (!token) return null;\n    const payload = verifyToken(token);\n    if (!payload) return null;\n    const { default: prisma } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_prisma_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.js\"));\n    const dbUser = await prisma.user.findUnique({\n        where: {\n            id: payload.userId\n        },\n        select: {\n            id: true\n        }\n    });\n    if (!dbUser) return null;\n    return payload;\n}\nfunction requireRole(...roles) {\n    return async function(req) {\n        const user = await getCurrentUser();\n        if (!user) {\n            return {\n                error: \"Unauthorized\",\n                status: 401\n            };\n        }\n        if (roles.length > 0 && !roles.includes(user.role)) {\n            return {\n                error: \"Forbidden\",\n                status: 403\n            };\n        }\n        return {\n            user\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrQkFBa0I7QUFDYTtBQUNEO0FBQ1M7QUFFdkMsTUFBTUcsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDN0MsTUFBTUcsZUFBZTtBQUVkLGVBQWVDLGFBQWFDLFFBQVE7SUFDekMsT0FBT1Asb0RBQVcsQ0FBQ08sVUFBVTtBQUMvQjtBQUVPLGVBQWVFLGVBQWVGLFFBQVEsRUFBRUMsSUFBSTtJQUNqRCxPQUFPUix1REFBYyxDQUFDTyxVQUFVQztBQUNsQztBQUVPLFNBQVNHLGNBQWNDLElBQUk7SUFDaEMsT0FBT2Isd0RBQVEsQ0FDYjtRQUFFZSxRQUFRRixLQUFLRyxFQUFFO1FBQUVDLE9BQU9KLEtBQUtJLEtBQUs7UUFBRUMsTUFBTUwsS0FBS0ssSUFBSTtRQUFFQyxNQUFNTixLQUFLTSxJQUFJO0lBQUMsR0FDdkVoQixZQUNBO1FBQUVpQixXQUFXZDtJQUFhO0FBRTlCO0FBRU8sU0FBU2UsWUFBWUMsS0FBSztJQUMvQixJQUFJO1FBQ0YsT0FBT3RCLDBEQUFVLENBQUNzQixPQUFPbkI7SUFDM0IsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlcUI7SUFDcEIsTUFBTUMsY0FBYyxNQUFNdkIscURBQU9BO0lBQ2pDLE1BQU1vQixRQUFRRyxZQUFZQyxHQUFHLENBQUMsZUFBZUM7SUFDN0MsSUFBSSxDQUFDTCxPQUFPLE9BQU87SUFDbkIsTUFBTU0sVUFBVVAsWUFBWUM7SUFDNUIsSUFBSSxDQUFDTSxTQUFTLE9BQU87SUFFckIsTUFBTSxFQUFFQyxTQUFTQyxNQUFNLEVBQUUsR0FBRyxNQUFNLG9LQUFPO0lBQ3pDLE1BQU1DLFNBQVMsTUFBTUQsT0FBT2pCLElBQUksQ0FBQ21CLFVBQVUsQ0FBQztRQUFFQyxPQUFPO1lBQUVqQixJQUFJWSxRQUFRYixNQUFNO1FBQUM7UUFBR21CLFFBQVE7WUFBRWxCLElBQUk7UUFBSztJQUFFO0lBQ2xHLElBQUksQ0FBQ2UsUUFBUSxPQUFPO0lBRXBCLE9BQU9IO0FBQ1Q7QUFFTyxTQUFTTyxZQUFZLEdBQUdDLEtBQUs7SUFDbEMsT0FBTyxlQUFnQkMsR0FBRztRQUN4QixNQUFNeEIsT0FBTyxNQUFNVztRQUNuQixJQUFJLENBQUNYLE1BQU07WUFDVCxPQUFPO2dCQUFFeUIsT0FBTztnQkFBZ0JDLFFBQVE7WUFBSTtRQUM5QztRQUNBLElBQUlILE1BQU1JLE1BQU0sR0FBRyxLQUFLLENBQUNKLE1BQU1LLFFBQVEsQ0FBQzVCLEtBQUtLLElBQUksR0FBRztZQUNsRCxPQUFPO2dCQUFFb0IsT0FBTztnQkFBYUMsUUFBUTtZQUFJO1FBQzNDO1FBQ0EsT0FBTztZQUFFMUI7UUFBSztJQUNoQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FybWVudC1lcnAvLi9zcmMvbGliL2F1dGguanM/ODdiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2F1dGguanNcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICdnYXJtZW50LWVycC1zZWNyZXQtY2hhbmdlLW1lJztcbmNvbnN0IFRPS0VOX0VYUElSWSA9ICc3ZCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQpIHtcbiAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgaGFzaCkge1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyKSB7XG4gIHJldHVybiBqd3Quc2lnbihcbiAgICB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSwgbmFtZTogdXNlci5uYW1lIH0sXG4gICAgSldUX1NFQ1JFVCxcbiAgICB7IGV4cGlyZXNJbjogVE9LRU5fRVhQSVJZIH1cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldCgnYXV0aC10b2tlbicpPy52YWx1ZTtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnlUb2tlbih0b2tlbik7XG4gIGlmICghcGF5bG9hZCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgeyBkZWZhdWx0OiBwcmlzbWEgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvcHJpc21hJyk7XG4gIGNvbnN0IGRiVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogcGF5bG9hZC51c2VySWQgfSwgc2VsZWN0OiB7IGlkOiB0cnVlIH0gfSk7XG4gIGlmICghZGJVc2VyKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4gcGF5bG9hZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKC4uLnJvbGVzKSB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiAocmVxKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogJ1VuYXV0aG9yaXplZCcsIHN0YXR1czogNDAxIH07XG4gICAgfVxuICAgIGlmIChyb2xlcy5sZW5ndGggPiAwICYmICFyb2xlcy5pbmNsdWRlcyh1c2VyLnJvbGUpKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogJ0ZvcmJpZGRlbicsIHN0YXR1czogNDAzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHVzZXIgfTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJqd3QiLCJiY3J5cHQiLCJjb29raWVzIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9FWFBJUlkiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImNvbXBhcmUiLCJnZW5lcmF0ZVRva2VuIiwidXNlciIsInNpZ24iLCJ1c2VySWQiLCJpZCIsImVtYWlsIiwicm9sZSIsIm5hbWUiLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5IiwiZ2V0Q3VycmVudFVzZXIiLCJjb29raWVTdG9yZSIsImdldCIsInZhbHVlIiwicGF5bG9hZCIsImRlZmF1bHQiLCJwcmlzbWEiLCJkYlVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJzZWxlY3QiLCJyZXF1aXJlUm9sZSIsInJvbGVzIiwicmVxIiwiZXJyb3IiLCJzdGF0dXMiLCJsZW5ndGgiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.js":
/*!***************************!*\
  !*** ./src/lib/prisma.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/prisma.js\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxvQkFBb0I7QUFDMEI7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUV4QixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUE7QUFFekQsSUFBSUksSUFBeUIsRUFBY0gsZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRXBFLGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FybWVudC1lcnAvLi9zcmMvbGliL3ByaXNtYS5qcz9lY2UyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvcHJpc21hLmpzXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXM7XG5cbmNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcblxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsrs%2Froute&page=%2Fapi%2Fsrs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsrs%2Froute.js&appDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Fgarment-erp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();